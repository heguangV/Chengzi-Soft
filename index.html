<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <title>é£å¹è¿‡çš„åœ°æ–¹</title>
    <meta charset="utf-8">
    <link rel="icon" href="./asset/images/sakiko.jpg" type="image/jpeg">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scale=no">
    <link rel="stylesheet" type="text/css" href="./asset/styles/menu.css">
    <link rel="stylesheet" type="text/css" href="./asset/styles/start.css">
    <link rel="stylesheet" type="text/css" href="./asset/styles/achievement.css">
    <link rel="stylesheet" type="text/css" href="./asset/styles/save.css">
    <link rel="stylesheet" type="text/css" href="./asset/styles/music.css">
    <link rel="stylesheet" type="text/css" href="./asset/styles/login.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=ZCOOL+KuaiLe&family=ZCOOL+QingKe+HuangYou&family=ZCOOL+XiaoWei&family=ZCOOL+KuaiLe&family=ZCOOL+QingKe+HuangYou&family=ZCOOL+XiaoWei&family=Noto+Serif+SC:wght@200..900&family=Noto+Sans+SC:wght@100..900&display=swap" rel="stylesheet">
    <style>
        /* æ·»åŠ ä¸€äº›å†…è”æ ·å¼å¢å¼ºè§†è§‰æ•ˆæœ */
        body {
            margin: 0;
            padding: 0;
            min-height: 100vh;
            overflow: hidden;
            position: relative;
            font-family: 'Noto Sans SC', sans-serif;
            color: #fff;
            /* é˜²æ­¢æ–‡æœ¬é€‰æ‹© */
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        /* å…è®¸éƒ¨åˆ†å…ƒç´ æ–‡æœ¬é€‰æ‹© */
        .login-form input,
        .achievement-content,
        .save-content {
            -webkit-user-select: text;
            -moz-user-select: text;
            -ms-user-select: text;
            user-select: text;
        }
        
        .background-img {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: -2;
            filter: brightness(0.7);
        }
        
        /* æ·»åŠ åŠ¨æ€èƒŒæ™¯æ•ˆæœ */
        .dynamic-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, rgba(101, 65, 155, 0.3), rgba(48, 96, 133, 0.3), rgba(176, 60, 131, 0.3));
            background-size: 400% 400%;
            z-index: -1;
            animation: gradientBG 15s ease infinite;
        }
        
        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        /* æ·»åŠ è½å¶åŠ¨ç”»æ•ˆæœ */
        .falling-leaves {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }
        
        .leaf {
            position: absolute;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23ffffff50"><path d="M12 2C13.66 2 15 3.34 15 5V6H16C17.66 6 19 7.34 19 9V19C19 20.66 17.66 22 16 22H8C6.34 22 5 20.66 5 19V9C5 7.34 6.34 6 8 6H9V5C9 3.34 10.34 2 12 2ZM12 4C11.45 4 11 4.45 11 5V6H13V5C13 4.45 12.55 4 12 4Z"/></svg>');
            background-size: cover;
            width: 20px;
            height: 20px;
            opacity: 0;
            animation: fall linear forwards;
        }
        
        @keyframes fall {
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0.6;
            }
        }
        
        /* èœå•é¡¹æ‚¬åœæ•ˆæœå¢å¼º */
        .function-item {
            transition: all 0.3s ease;
            cursor: pointer;
            /* é˜²æ­¢æ–‡æœ¬é€‰æ‹© */
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        .function-item:hover {
            transform: translateX(10px);
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
        }
        
        /* æ ‡é¢˜åŠ¨ç”»æ•ˆæœ */
        .title {
            animation: fadeInDown 1s ease;
            /* é˜²æ­¢æ–‡æœ¬é€‰æ‹© */
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        .wind-character {
            display: inline-block;
            animation: windBlow 3s infinite alternate;
        }
        
        @keyframes windBlow {
            0% { transform: skewX(0deg); }
            25% { transform: skewX(5deg); }
            50% { transform: skewX(-5deg); }
            75% { transform: skewX(3deg); }
            100% { transform: skewX(0deg); }
        }
        
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* å“åº”å¼è°ƒæ•´ */
        @media (max-width: 768px) {
            .menu {
                width: 90% !important;
                padding: 20px !important;
            }
            
            .title .text {
                font-size: 2rem !important;
            }
            
            .function-item {
                padding: 12px 0 !important;
            }
        }
        
        /* è‡ªå®šä¹‰æ–‡æœ¬é€‰æ‹©é¢œè‰² */
        ::selection {
            background: rgba(255, 222, 89, 0.3);
            color: #fff;
        }
        
        ::-moz-selection {
            background: rgba(255, 222, 89, 0.3);
            color: #fff;
        }
        
        /* é»‘å±è½¬åœºæ•ˆæœæ ·å¼ */
        .fade-transition {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #000;
            opacity: 0;
            z-index: 9999;
            transition: opacity 0.5s ease-in-out;
            pointer-events: none;
        }
        
        .fade-transition.active {
            opacity: 1;
            pointer-events: auto;
        }
    </style>
</head>

<body>
    <!-- åŠ¨æ€èƒŒæ™¯ -->
    <div class="dynamic-bg"></div>
    
    <!-- è½å¶åŠ¨ç”» -->
    <div class="falling-leaves" id="leaves-container"></div>
    
    <!-- éŸ³ä¹æ’­æ”¾å™¨ -->
    <div class="music-player">
        <button id="music-btn" class="music-btn">
            <span class="music-icon">â–¶</span>
        </button>
        <div class="music-visualizer">
            <div class="visualizer-bar"></div>
            <div class="visualizer-bar"></div>
            <div class="visualizer-bar"></div>
            <div class="visualizer-bar"></div>
            <div class="visualizer-bar"></div>
        </div>
        <div class="music-info">
            <span class="music-title">èƒŒæ™¯éŸ³ä¹</span>
            <div class="volume-control">
                <input type="range" id="volume-range" min="0" max="100" value="50" class="volume-slider">
                <span class="volume-icon">ğŸ”Š</span>
            </div>
        </div>
    </div>
    
    <audio id="bg-music" src="your-music.mp3" loop></audio>
    
    <div class="menu">
        <div class="title">
            <div class="text">
                <span class="wind-character">é£</span><span class="other-text">å¹è¿‡çš„åœ°æ–¹</span>
            </div>
        </div>
        
        <div class="function-list">
            <div class="function-item" id="start">
                <span class="function-text">å¼€å§‹æ¸¸æˆ</span>
            </div>
            <div class="divider"></div>
            
            <div class="function-item" id="load">
                <span class="function-text">åŠ è½½å­˜æ¡£</span>
            </div>
            <div class="divider"></div>
            
            <div class="function-item" id="achievement">
                <span class="function-text">æˆå°±é¡µé¢</span>
            </div>
            <div class="divider"></div>
            
            <div class="function-item" id="exit">
                <span class="function-text">é€€å‡ºæ¸¸æˆ</span>
            </div>
            <div class="divider"></div>
            
            <div class="function-item" id="team">
                <span class="function-text">å›¢é˜Ÿä¿¡æ¯</span>
            </div>
        </div>
    </div>

    <!-- å·¦ä¾§ä¾§è¾¹æ æç¤º -->
    <div class="achievement-sidebar"></div>

    <!-- æˆå°±é¡µé¢æ¨¡æ€æ¡† -->
    <div id="achievementModal" class="achievement-modal">
        <div class="achievement-content">
            <div class="achievement-header">
                <h2>æˆå°±ç³»ç»Ÿ</h2>
                <button class="close-btn" id="closeAchievement">&times;</button>
            </div>
            <div class="achievement-tabs">
                <button class="tab-btn active" data-tab="completed">å·²å®Œæˆ</button>
                <button class="tab-btn" data-tab="uncompleted">æœªå®Œæˆ</button>
            </div>
            <div class="achievement-list" id="achievementList">
                <!-- æˆå°±åˆ—è¡¨å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>
    </div>

    <!-- å­˜æ¡£é¡µé¢æ¨¡æ€æ¡† -->
    <div id="saveModal" class="save-modal">
        <div class="save-content">
            <div class="save-header">
                <h2>ğŸ’¾ æ¸¸æˆå­˜æ¡£</h2>
                <button class="close-btn" id="closeSave">&times;</button>
            </div>
            <div class="save-container" id="saveContainer">
                <!-- å­˜æ¡£åˆ—è¡¨å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
            <div class="save-actions">
                <button class="save-action-btn" id="newSaveBtn">æ–°å»ºå­˜æ¡£</button>
                <button class="save-action-btn" id="importSaveBtn">å¯¼å…¥å­˜æ¡£</button>
            </div>
        </div>
    </div>

    <!-- ç™»å½•é¡µé¢æ¨¡æ€æ¡† -->
    <div id="loginModal" class="login-modal">
        <div class="login-content">
            <div class="login-header">
                <h2>ç™»å½• / æ³¨å†Œ</h2>
                <button class="close-btn" id="closeLogin">&times;</button>
            </div>
            <form class="login-form">
                <!-- ç™»å½•è¡¨å• -->
                <div id="login-form-content" style="display:flex; flex-direction:column; align-items:center; width:100%; gap:15px;">
                    <div class="login-title">æ¬¢è¿ï¼</div>
                    <div class="login-title"><span>æ³¨å†Œä¸€ä¸ªè´¦å·</span><br><span>or</span><br><span>å·²æœ‰è´¦å·ï¼Œç™»å½•<br></span></div>
                    <input class="input" id="login-username" name="email" placeholder="è¯·è¾“å…¥ç”¨æˆ·å" type="email">
                    <div id="login-error" style="display:none">
                      è´¦å·æˆ–å¯†ç é”™è¯¯
                    </div>
                    <input class="input" id="login-password" name="password" placeholder="è¯·è¾“å…¥å¯†ç " type="password">
                    <button type="button" class="button-confirm" id="signup-btn">æ³¨å†Œï¼</button>
                    <button type="button" class="button-confirm" id="login-btn">å¼€å§‹ï¼</button>
                </div>
                
                <!-- æ³¨å†Œè¡¨å• -->
                <div id="signup-form-content" style="display:none; flex-direction:column; align-items:center; width:100%; gap:15px;">
                    <div class="login-title">åˆ›å»ºè´¦å·<br></div>
                    <input class="input" id="signup-email" name="email" placeholder="è¯·è¾“å…¥ç”¨æˆ·å" type="email">
                    <input class="input" id="signup-password" name="password" placeholder="è¯·è¾“å…¥å¯†ç " type="password">
                    <div id="signup-error" style="color:red; font-size:14px; display:none; margin-bottom:5px;"></div>
                    <input class="input" id="signup-confirm-password" name="confirm-password" placeholder="ç¡®è®¤å¯†ç " type="password">
                    <button type="button" class="button-confirm" id="register-btn">æ³¨å†Œè´¦å·</button>
                    <button type="button" class="button-confirm" id="back-to-login-btn">è¿”å›</button>
                </div>
            </form>
        </div>
    </div>

    <!-- èƒŒæ™¯å›¾ç‰‡ -->
    <img src="./asset/images/background.jpg" alt="èƒŒæ™¯å›¾" class="background-img">
    
    <!-- é»‘å±è½¬åœºæ•ˆæœå…ƒç´  -->
    <div class="fade-transition" id="fadeTransition"></div>
    
    <script>
        // æ·»åŠ è½å¶åŠ¨ç”»
        function createLeaves() {
            const container = document.getElementById('leaves-container');
            const leafCount = 15;
            
            for (let i = 0; i < leafCount; i++) {
                const leaf = document.createElement('div');
                leaf.classList.add('leaf');
                
                // éšæœºä½ç½®å’ŒåŠ¨ç”»å»¶è¿Ÿ
                const leftPos = Math.random() * 100;
                const animDuration = 10 + Math.random() * 20;
                const animDelay = Math.random() * 10;
                
                leaf.style.left = `${leftPos}%`;
                leaf.style.top = `${-10 - Math.random() * 10}%`;
                leaf.style.animationDuration = `${animDuration}s`;
                leaf.style.animationDelay = `${animDelay}s`;
                
                container.appendChild(leaf);
            }
        }
        
        // èœå•é¡¹ç‚¹å‡»æ•ˆæœ
        document.querySelectorAll('.function-item').forEach(item => {
            item.addEventListener('click', function() {
                // æ·»åŠ ç‚¹å‡»åé¦ˆæ•ˆæœ
                this.style.transform = 'translateX(5px)';
                setTimeout(() => {
                    this.style.transform = '';
                }, 200);
                
                // æ ¹æ®IDæ‰§è¡Œç›¸åº”æ“ä½œ
                const id = this.id;
                if (id === 'start') {
                    // å¼€å§‹æ¸¸æˆé€»è¾‘
                    document.getElementById('loginModal').style.display = 'block';
                } else if (id === 'load') {
                    // åŠ è½½å­˜æ¡£é€»è¾‘
                    document.getElementById('saveModal').style.display = 'block';
                } else if (id === 'achievement') {
                    // æˆå°±é¡µé¢é€»è¾‘
                    document.getElementById('achievementModal').style.display = 'block';
                } else if (id === 'exit') {
                    // é€€å‡ºæ¸¸æˆé€»è¾‘
                    if (confirm('ç¡®å®šè¦é€€å‡ºæ¸¸æˆå—ï¼Ÿ')) {
                        window.close();
                    }
                } else if (id === 'team') {
                    // å›¢é˜Ÿä¿¡æ¯é€»è¾‘
                    alert('å¼€å‘å›¢é˜Ÿä¿¡æ¯å°†åœ¨è¿™é‡Œæ˜¾ç¤º');
                }
            });
        });
        
        // åˆå§‹åŒ–
        window.onload = function() {
            createLeaves();
            
            // å…³é—­æŒ‰é’®äº‹ä»¶
            document.getElementById('closeAchievement').addEventListener('click', function() {
                document.getElementById('achievementModal').style.display = 'none';
            });
            
            document.getElementById('closeSave').addEventListener('click', function() {
                document.getElementById('saveModal').style.display = 'none';
            });
            
            document.getElementById('closeLogin').addEventListener('click', function() {
                document.getElementById('loginModal').style.display = 'none';
            });
            
            // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
            window.addEventListener('click', function(event) {
                const achievementModal = document.getElementById('achievementModal');
                const saveModal = document.getElementById('saveModal');
                const loginModal = document.getElementById('loginModal');
                
                if (event.target === achievementModal) {
                    achievementModal.style.display = 'none';
                }
                if (event.target === saveModal) {
                    saveModal.style.display = 'none';
                }
                if (event.target === loginModal) {
                    loginModal.style.display = 'none';
                }
            });
            
            // æ·»åŠ é¢å¤–çš„é˜²æ­¢æ–‡æœ¬é€‰æ‹©äº‹ä»¶ç›‘å¬å™¨
            document.querySelectorAll('.function-item, .title, .music-player, .music-title').forEach(element => {
                element.addEventListener('mousedown', function(e) {
                    e.preventDefault();
                });
            });
        };
        
        // é˜²æ­¢æ–‡æœ¬é€‰æ‹©çš„é¢å¤–ä¿æŠ¤
        document.addEventListener('DOMContentLoaded', function() {
            // ç¦ç”¨æ–‡æœ¬é€‰æ‹©
            disableTextSelection();
        });
        
        function disableTextSelection() {
            // ä¸ºæ‰€æœ‰ä¸åº”è¢«é€‰æ‹©çš„å…ƒç´ æ·»åŠ ç±»
            const noSelectElements = document.querySelectorAll('.function-item, .title, .music-player, .music-title, .music-btn');
            noSelectElements.forEach(el => {
                el.classList.add('no-select');
            });
            
            // é˜²æ­¢æ‹–æ‹½äº§ç”Ÿé€‰æ‹©
            document.addEventListener('dragstart', function(e) {
                if (e.target.classList.contains('no-select')) {
                    e.preventDefault();
                }
            });
        }
    </script>
    
    <script src="./script/menu.js"></script>
    <script src="./script/achievement.js"></script>
    <script src="./script/save.js"></script>
    <script src="./script/music.js"></script>
    <script src="./script/login.js"></script>
</body>
</html>